<!DOCTYPE HTML>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Phantom by HTML5 UP</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="/assets/css/main.css" />
		<noscript><link rel="stylesheet" href="/assets/css/noscript.css" /></noscript>
		<script type="text/javascript">
			function loadBooks() {
				fetch("http://127.0.0.1:5000/firstCall", {
                    method: "GET"
                }).then(response => response.json()).then(data => {
                    var title = "";
                    var author = "";
					var desc = "";
					for(let i = 0; i < 12; i++) {
					    title = "title" + i;
                        author = "author" + i;
					    desc = "desc" + i;
					    document.getElementById(title).innerHTML = data[i][0]
                        document.getElementById(author).innerHTML = data[i][1]
					    document.getElementById(desc).innerHTML = data[i][2]
					}
                });
			}
		</script>
	</head>
	<body onload="loadBooks();" class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">

							<!-- Logo -->
								<a href="index.html" class="logo">
									<span class="symbol"><img src="/images/logo.svg" alt="" /></span><span class="title">Bɪnder</span>
								</a>

						</div>
					</header>

				<!-- Main -->
					<div id="main">
						<div class="inner">
							<header>
								<h1>Welcome to Bɪnder, like Tinder but for books :&rpar;<br/>
								<a href="http://html5up.net"></a></h1>
								<p>Simply click on the books you like, and Bɪnder will take care of the rest!</p>
							</header>
							<section class="tiles">
								<style>
									.border-on-click {
										border: 5px solid black;
									}
								</style>
								<article class="style1" onclick="addToInput(0); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic01.jpg" alt="" />
									</span>
									<a>
										<h2 id="title0" style="font-size: 14px;">Title</h2>
										<h3 id="author0" style="font-size: 12px;">Author</h3>
										<div id="desc0" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>
								<article class="style2" onclick="addToInput(1); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic02.jpg" alt="" />
									</span>
									<a>
										<h2 id="title1" style="font-size: 14px;">Title</h2>
										<h3 id="author1" style="font-size: 12px;">Author</h3>
										<div id="desc1" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>
								<article class="style3" onclick="addToInput(2); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic03.jpg" alt="" />
									</span>
									<a>
										<h2 id="title2" style="font-size: 14px;">Title</h2>
										<h3 id="author2" style="font-size: 12px;">Author</h3>
										<div id="desc2" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>
								<article class="style4" onclick="addToInput(3); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic04.jpg" alt="" />
									</span>
									<a>
										<h2 id="title3" style="font-size: 14px;">Title</h2>
										<h3 id="author3" style="font-size: 12px;">Author</h3>
										<div id="desc3" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>
								<article class="style5" onclick="addToInput(4); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic05.jpg" alt="" />
									</span>
									<a>
										<h2 id="title4" style="font-size: 14px;">Title</h2>
										<h3 id="author4" style="font-size: 12px;">Author</h3>
										<div id="desc4" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>
								<article class="style6" onclick="addToInput(5); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic06.jpg" alt="" />
									</span>
									<a>
										<h2 id="title5" style="font-size: 14px;">Title</h2>
										<h3 id="author5" style="font-size: 12px;">Author</h3>
										<div id="desc5" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>
								<article class="style2" onclick="addToInput(6); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic07.jpg" alt="" />
									</span>
									<a>
										<h2 id="title6" style="font-size: 14px;">Title</h2>
										<h3 id="author6" style="font-size: 12px;">Author</h3>
										<div id="desc6" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>
								<article class="style3" onclick="addToInput(7); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic08.jpg" alt="" />
									</span>
									<a>
										<h2 id="title7" style="font-size: 14px;">Title</h2>
										<h3 id="author7" style="font-size: 12px;">Author</h3>
										<div id="desc7" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>
								<article class="style1" onclick="addToInput(8); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic09.jpg" alt="" />
									</span>
									<a>
										<h2 id="title8" style="font-size: 14px;">Title</h2>
										<h3 id="author8" style="font-size: 12px;">Author</h3>
										<div id="desc8" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>
								<article class="style5" onclick="addToInput(9); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic10.jpg" alt="" />
									</span>
									<a>
										<h2 id="title9" style="font-size: 14px;">Title</h2>
										<h3 id="author9" style="font-size: 12px;">Author</h3>
										<div id="desc9" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>
								<article class="style6" onclick="addToInput(10); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic11.jpg" alt="" />
									</span>
									<a>
										<h2 id="title10" style="font-size: 14px;">Title</h2>
										<h3 id="author10" style="font-size: 12px;">Author</h3>
										<div id="desc10" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>
								<article class="style4" onclick="addToInput(11); this.classList.toggle('border-on-click')">
									<span class="image">
										<img src="/images/pic12.jpg" alt="" />
									</span>
									<a>
										<h2 id="title11" style="font-size: 14px;">Title</h2>
										<h3 id="author11" style="font-size: 12px;">Author</h3>
										<div id="desc11" class="content">
											<p style="font-size: 7px;">Description.</p>
										</div>
									</a>
								</article>

								<script>								
									var inputArr = [];

									function addToInput(bookIndex) {
										if(!inputArr.includes(bookIndex)) {
											inputArr.push(bookIndex);
										} else {
											var deleteIndex = inputArr.indexOf(bookIndex);
											delete inputArr[deleteIndex];
										}
									}

									function getRecommendations() {
										var deleteEmpty = [];
										var counter = 0;
										for(let i = 0; i < inputArr.length; i++) {
											if(inputArr[i] != null) {
												deleteEmpty[counter] = inputArr[i];
												counter++;
												//document.getElementById("article" + i).classList.toggle('border-on-click');
											}
										}
										var reccs = []; // replace [] with call to python function

                                        // Sends a POST request to the flask server.
                                        fetch("http://127.0.0.1:5000/recommend", {
                                            method: "POST",
                                            headers: {
                                                "Content-Type": "application/json",
                                            },
                                            body: JSON.stringify({ array: deleteEmpty })
                                        }).then(response => response.json()).then(data => {
                                            var title = "";
                                            var author = "";
                                            var desc = "";
                                            for(let i = 0; i < 12; i++) {
                                                title = "title" + i;
                                                author = "author" + i;
                                                desc = "desc" + i;
                                                document.getElementById(title).innerHTML = data[i][0]
                                                document.getElementById(author).innerHTML = data[i][1]
                                                document.getElementById(desc).innerHTML = data[i][2]
                                            }
                                        });
									}
									
									function toggleOffBorder() {
										var articles = document.querySelectorAll('.border-on-click');
										articles.forEach(function(article) {
											article.classList.remove('border-on-click');
										});
									}
								</script>
							</section>
							<br>
							<section>
								<ul class="actions">
									<li><a href="#" class="button primary" onclick="getRecommendations(); toggleOffBorder()">Recommend More Books!</a></li>
								</ul>
							</section>
						</div>
					</div>
			</div>

		<!-- Scripts -->
			<script src="/assets/js/jquery.min.js"></script>
			<script src="/assets/js/browser.min.js"></script>
			<script src="/assets/js/breakpoints.min.js"></script>
			<script src="/assets/js/util.js"></script>
			<script src="/assets/js/main.js"></script>

	</body>
</html>